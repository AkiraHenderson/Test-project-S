using UnityEngine;

public class Parallax : MonoBehaviour
{
    private CharactorBehaviour target;

    Material mat;
    float distance;

    //float speed = 1.0f;
    //float plusSpeed;
    //float minusSpeed;

    [Range(0.0f, 1.0f)]
    public float ratio = 0.5f;

    void Awake()
    {
        target = GetComponentInParent<Background>().player.GetComponent<CharactorBehaviour>();
        Debug.Log(target.name);

        mat = GetComponent<Renderer>().material; 
        //plusSpeed = speed;
        //minusSpeed = -speed;
    }

    void Update()
    {
        float sign = 0;
        if (target.Move.x > 0) { sign = 1; }
        else if (target.Move.x < 0) { sign = -1; }
        else { sign = 0; }

        distance += Time.deltaTime * sign * ratio;
        mat.SetTextureOffset("_MainTex", Vector2.right * distance);

        transform.position = target.transform.position;
    }
}
